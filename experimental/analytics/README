The sequence of steps to produce plots is as follows:
1. Run hive_reader to fetch relevant data from Hive tables into a csv file

e.g. buck run @mode/dev-nosan papaya/toolkit/simulation/experimental/analytics:hive_reader -- --output_file "/data/users/akashb/fa_data/cell_tower_info_tile_ip_clean_ni_agg_updated.csv"

You can specify details of the Hive table to read. The default pulls for Hive tables created by FBC for the purposes of simulation during H2 2020.

2. Run fbc_agg_preprocessor to produce processed data for simulation

e.g. buck run @mode/dev-nosan papaya/toolkit/simulation/experimental/analytics:fbc_agg_preprocessor -- --fbc_data_file "/data/users/akashb/fa_data/cell_tower_info_tile_ip_clean_ni_agg_updated.csv" --output_dir "/data/users/akashb/fa_data/processed/"

3. Run fbc_main to run simulations and store results for evaluation

e.g. buck run @mode/dev-nosan papaya/toolkit/simulation/experimental/analytics:fbc_main -- --FBC_ARTIFACTS_PATH "/data/users/akashb/fa_data/processed/" --output_dir "/data/users/akashb/fbsource/fbcode/papaya/toolkit/simulation/experimental/analytics"

4. Run fbc_plot_results to produce 3D surface plots examining the effect of varying hyper-parameters on performance metrics for tiles in different population regimes

e.g. buck run @mode/dev-nosan papaya/toolkit/simulation/experimental/analytics:fbc_plot_results -- --results_file "/data/users/akashb/fbsource/fbcode/papaya/toolkit/simulation/experimental/analytics/triehh_fbc_results_full_ablation_upto_k_100_upto_regime_500000_1000000_no_ensemble_beam_50_10.0_ldp.pkl" --plot_dir "/data/users/akashb/fbsource/fbcode/papaya/toolkit/simulation/experimental/analytics/plots/"

Note that the plot_dir must already exist and must have the following sub-directory structure:

plot_dir
|
-- regime_1000_10000
    |
    -- f1
    |
    -- prec
    |
    -- rec
|
-- regime_50000_100000
    |
    -- f1
    |
    -- prec
    |
    -- rec
|
-- regime_500000_1000000
    |
    -- f1
    |
    -- prec
    |
    -- rec
|
-- regime_50000000_10000000000
    |
    -- f1
    |
    -- prec
    |
    -- rec
